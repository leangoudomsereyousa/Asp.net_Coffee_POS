@model Coffee_POS.ViewModels.MenuViewModel
@{
    ViewData["Title"] = "Menu";
    Layout = "_Layout";
}

<section class="py-16 bg-gray-50 dark:bg-gray-900">

    <!-- TITLE -->
    <div class="max-w-4xl mx-auto text-center mb-16">
        <h2 class="text-5xl font-extrabold text-gray-900 dark:text-white tracking-tight">Our Menu</h2>
        <p class="text-gray-500 dark:text-gray-400 mt-4 text-lg md:text-xl">Freshly brewed. Crafted with care.</p>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid lg:grid-cols-12 gap-12">
        <!-- SIDEBAR / CATEGORIES -->
        <aside class="lg:col-span-3">
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow p-6 sticky top-32">
                <h6 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">Categories</h6>
                <ul class="space-y-3 text-sm">
                    <li>
                        <a asp-action="Index"
                           class="category-link block font-semibold text-gray-900 dark:text-white">All Categories</a>
                    </li>
                    @foreach (var cat in Model.Categories)
                    {
                        <li>
                            <a asp-action="Index"
                               asp-route-categoryId="@cat.Id"
                               class="category-link block text-gray-500 dark:text-gray-300">@cat.Name</a>
                        </li>
                    }
                </ul>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="lg:col-span-9 space-y-12">

            <!-- TOP BAR: Search + Cart -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-6">
                <!-- Search -->
                <form asp-action="Index" method="get" class="flex-1">
                    <div class="flex border border-gray-200 dark:border-gray-700 rounded-full overflow-hidden shadow-sm">
                        <input type="search"
                               class="flex-1 px-6 py-3 text-gray-900 dark:text-white bg-white dark:bg-gray-800 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none"
                               name="searchKey"
                               value="@Model.SearchKey"
                               placeholder="Search coffee, espresso, latte…" />
                        <button class="bg-gray-900 text-white px-6 flex items-center justify-center hover:bg-gray-800 transition">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </form>

                <!-- Cart -->
                @if (Model.CartCount > 0)
                {
                    <a asp-controller="Cart" asp-action="Index"
                       class="bg-gray-900 text-white rounded-full px-6 py-3 flex items-center gap-3 shadow hover:bg-gray-800 transition font-semibold">
                        <i class="fa fa-shopping-bag"></i> Cart (@Model.CartCount)
                    </a>
                }
            </div>

            <!-- PRODUCTS GRID -->
            <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10">
                @foreach (var item in Model.Products)
                {
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-lg overflow-hidden group transition-transform hover:-translate-y-2 hover:shadow-2xl flex flex-col">

                        <!-- Image -->
                        <div class="relative overflow-hidden h-60">
                            <img src="~/productImages/@item.Image"
                                 class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" />
                            <span class="absolute top-4 left-4 bg-green-800 text-white px-3 py-1 rounded-full text-xs font-medium">
                                @item.Category?.Name
                            </span>
                            <!-- Favorite Icon -->
                            <button class="absolute top-4 right-4 text-white bg-black/40 hover:bg-black/60 p-2 rounded-full transition">
                                <i class="fa fa-heart"></i>
                            </button>
                        </div>

                        <!-- Content -->
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">@item.Name</h3>

                            <!-- Starbucks-style description -->
                            <p class="text-gray-500 dark:text-gray-400 text-sm mb-4 line-clamp-3">
                                @item.Description
                            </p>

                            <!-- Price & Size -->
                            <div class="space-y-1 mb-4">
                                @foreach (var size in item.ProductSizes)
                                {
                                    <div class="flex justify-between items-center text-sm text-gray-600 dark:text-gray-300">
                                        <span>@size.Size</span>
                                        <span>$@size.Price.ToString("0.00")</span>
                                    </div>
                                }

                            </div>



                            <!-- Add to Cart Button -->
                            <form asp-controller="Cart" asp-action="Add" method="post" class="mt-auto">
                                <input type="hidden" name="productId" value="@item.Id" />
                                <input type="hidden" name="qty" value="1" />
                                <button class="bg-green-800 text-white w-full py-3 rounded-full flex justify-center items-center gap-2 hover:bg-green-700 transition font-semibold">
                                    <i class="fa fa-plus"></i> Add to Cart
                                </button>
                            </form>
                        </div>
                    </div>
                }
            </div>

        </main>
    </div>
</section>

<style>
    /* Product hover smooth lift + shadow */
    .product-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    /* Category hover */
    .category-link {
        transition: color 0.2s ease, font-weight 0.2s ease;
    }

        .category-link:hover,
        .category-link.active {
            color: #111827; /* Dark gray */
            font-weight: 600;
        }

    /* Limit description lines */
    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>
